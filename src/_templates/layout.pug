block vars
    - var self_url = self.path === '/' ? '/' : self.path + '/'

mixin markdown(text)
    | !{ self.md(text) }


doctype html
html(lang=self.locale)
    head
        meta(charset='utf-8')
        meta(name='viewport', content='width=device-width, initial-scale=1')
        meta(property='og:url', content='https://wwii-ref.ee' + self.path)
        meta(property='og:title', content=self.title ? self.title + ' · ' + self.siteTitle : self.siteTitle)
        meta(property='og:image', content=self.pictures[0])

        title= self.title && self.title !== self.siteTitle ? self.title + ' · ' + self.siteTitle : self.siteTitle

        link(href='https://fonts.googleapis.com/css?family=Montserrat:400,400i,500,500i,700,700i,800,800i&display=swap&subset=cyrillic,cyrillic-ext,latin-ext', rel='stylesheet', type='text/css')
        link(href='https://www.w3schools.com/w3css/4/w3.css', rel='stylesheet')
        link(href='/style.css', rel='stylesheet')

        block style

        script(defer, data-domain='https://wwii-refugees.ee/', src='https://plausible.io/js/plausible.js')
        script.
            window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) }
            plausible('Host', { props: { host: window.location.host } })

    body
        include navigation.pug
        #page.w3-col.w3-container.m4.l3.w3-yellow
            block pageTitle

            if self.popup
                include popup.pug

            script(src='/script.js')

            block contents

            div 
                pre= JSON.stringify(self.path, null, 2)
                pre= JSON.stringify(self_url, null, 2)
                pre= JSON.stringify(self.navigation, null, 2)

            block script
